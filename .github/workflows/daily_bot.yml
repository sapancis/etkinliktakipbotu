name: Etkinlik Botu Günlük Kontrol

on:
  # 1. Zamanlanmış Tetikleyici (Cron Job)
  schedule:
    # UTC saatiyle 07:00'de çalışır.
    # Türkiye (UTC+3) saatiyle sabah 10:00'a denk gelir.
    # Saati değiştirmek için: https://crontab.guru/
    - cron: '0 7 * * *'
  
  # 2. Manuel Tetikleyici (Test etmek isterseniz butona basarak çalıştırırsınız)
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # Kodları depodan çek
      - name: Depoyu Kontrol Et (Checkout)
        uses: actions/checkout@v3

      # Python Kurulumu
      - name: Python Kurulumu (3.10)
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      # Chrome Tarayıcı Kurulumu (Selenium için gerekli)
      - name: Chrome Tarayıcıyı Kur
        uses: browser-actions/setup-chrome@latest
        with:
          chrome-version: stable

      # Gerekli Kütüphanelerin Yüklenmesi
      - name: Kütüphaneleri Yükle
        run: |
          python -m pip install --upgrade pip
          pip install requests gspread oauth2client selenium webdriver-manager beautifulsoup4 fake-useragent

      # Botun Çalıştırılması
      - name: Botu Çalıştır
        env:
          # GitHub Secrets kısmına eklediğiniz değişkenler buraya çekilir
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          G_SHEET_CREDS: ${{ secrets.G_SHEET_CREDS }}
        # Script dosyanızın adı 'main.py' ise bu şekilde kalmalı. Farklıysa değiştirin.
        run: python main.py
